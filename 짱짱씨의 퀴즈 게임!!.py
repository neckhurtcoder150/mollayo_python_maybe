import random
import time
import sys
import threading

# ========================================================
# 💫 텍스트 타자 효과
# ========================================================
def slow_print(text, delay=0.03):
    for c in text:
        sys.stdout.write(c)
        sys.stdout.flush()
        time.sleep(delay)
    print()

# ========================================================
# ⏱️ 타임어택 입력 (threading 기반)
# ========================================================
def timed_input(prompt, timeout=5):
    result = [""]
    def inner():
        result[0] = input(prompt)
    
    thread = threading.Thread(target=inner)
    thread.daemon = True
    thread.start()
    thread.join(timeout)
    if thread.is_alive():
        print("\n⏰ 시간 초과! 자동으로 넘어갑니다.")
        return "", True
    return result[0], False

# ========================================================
# 🎯 퀴즈 데이터 (풀 버전)
# ========================================================
quiz_data = {
    "general": {
        "easy": [
            ("한국의 수도는?", "서울"), ("태양은 어느 방향에서 뜨나요?", "동쪽"),
            ("1년은 몇 개월?", "12"), ("비 오는 날 필요한 건?", "우산"),
            ("하늘의 색깔은?", "파란색"), ("봄 다음 계절은?", "여름"),
            ("강아지는 어떤 동물?", "포유류"), ("2 + 5 = ?", "7"),
            ("9 + 1 = ?", "10"), ("‘감사합니다’ 영어로?", "thank you"),
            ("사람은 무엇으로 숨 쉬나요?", "폐"), ("한국의 화폐 단위는?", "원"),
            ("나무는 산소를 무엇으로 만드나요?", "광합성"), ("가장 가까운 별은?", "태양"),
            ("고양이 영어로?", "cat"), ("한국의 국기는?", "태극기"),
            ("5 x 2 = ?", "10"), ("사과 영어로?", "apple"),
            ("겨울에 내리는 건?", "눈"), ("하루는 몇 시간?", "24"),
            ("3 + 4 = ?", "7"), ("10 - 6 = ?", "4"),
            ("2의 제곱은?", "4"), ("피카츄의 친구는?", "라이츄"),
            ("사람의 심장은 몇 개?", "1")
        ],
        "medium": [
            ("파이썬 창시자는?", "귀도 반 로섬"), ("지구의 위성은?", "달"),
            ("태양계에서 가장 큰 행성은?", "목성"), ("대한민국의 국화는?", "무궁화"),
            ("HTML의 약자는?", "HyperText Markup Language"), ("서울을 가로지르는 강은?", "한강"),
            ("광합성에 필요한 기체는?", "이산화탄소"), ("빛의 속도 단위는?", "km/s"),
            ("대한민국의 첫 대통령은?", "이승만"), ("한글을 만든 왕은?", "세종대왕"),
            ("프랑스의 수도는?", "파리"), ("영어 알파벳의 마지막 글자는?", "z"),
            ("100의 제곱근은?", "10"), ("빛의 3원색은?", "빨강 초록 파랑"),
            ("지구에서 가장 깊은 해구는?", "마리아나 해구"), ("지구는 태양의 몇 번째 행성?", "3"),
            ("1년은 몇 일?", "365"), ("물의 화학식은?", "H2O"),
            ("대한민국의 건국일은?", "1948"), ("나폴레옹은 어느 나라 사람?", "프랑스"),
            ("9 x 8 = ?", "72"), ("원주율 π의 값은?", "3.14"),
            ("컴퓨터의 CPU는 무엇의 약자?", "Central Processing Unit"),
            ("60초는 몇 분?", "1"), ("대한민국의 국어는?", "한국어")
        ],
        "hard": [
            ("빛의 속도는 초속 약 몇 km?", "300000"),
            ("DNA의 풀네임은?", "Deoxyribonucleic Acid"),
            ("상대성이론을 발표한 과학자?", "아인슈타인"),
            ("원자번호 79번 원소는?", "금"),
            ("‘E=mc²’에서 c는 무엇?", "빛의 속도"),
            ("엔트로피는 무엇의 척도?", "무질서도"),
            ("절대영도는 몇 도?", "-273.15"),
            ("최초의 컴퓨터 이름은?", "에니악"),
            ("태양계 행성 중 고리가 있는 행성은?", "토성"),
            ("가장 큰 소수는 존재하나요?", "없다"),
            ("피타고라스 정리 공식은?", "a² + b² = c²"),
            ("빛이 굴절되는 이유는?", "속도의 차이"),
            ("인류 최초의 달 착륙 연도는?", "1969"),
            ("지구의 평균 자전 속도는?", "1670"),
            ("세포의 에너지를 생산하는 기관은?", "미토콘드리아"),
            ("탄소의 원자번호는?", "6"),
            ("양자역학의 창시자 중 한 명은?", "플랑크"),
            ("태양의 표면 온도는 약 몇 도?", "5500"),
            ("뉴턴의 제1법칙은?", "관성의 법칙"),
            ("빛의 세 가지 원색은?", "빨강 초록 파랑"),
            ("지구의 나이는 약 몇 년?", "45억"),
            ("가장 빠른 동물은?", "치타"),
            ("물은 몇 도에서 끓나요?", "100"),
            ("절대영도의 반대 개념은?", "무한온도"),
            ("태양은 어떤 종류의 별?", "G형 주계열성")
        ]
    },
    "math": {
        "easy": [
            ("2 + 3 = ?", "5"), ("10 - 4 = ?", "6"), ("5 x 2 = ?", "10"),
            ("9 / 3 = ?", "3"), ("7 + 1 = ?", "8"), ("6 - 2 = ?", "4"),
            ("2의 제곱은?", "4"), ("3 + 4 + 5 = ?", "12"), ("1 + 9 = ?", "10"),
            ("12 ÷ 4 = ?", "3")
        ],
        "medium": [
            ("8 x 7 = ?", "56"), ("25 ÷ 5 = ?", "5"), ("15 + 27 = ?", "42"),
            ("11 x 11 = ?", "121"), ("3² + 4² = ?", "25"), ("√49 = ?", "7"),
            ("100 ÷ 25 = ?", "4"), ("9² = ?", "81"), ("5³ = ?", "125"),
            ("50 - 23 = ?", "27")
        ],
        "hard": [
            ("π의 소수점 첫째 자리까지는?", "3.1"),
            ("2⁵ = ?", "32"), ("(3 + 5) x 2 = ?", "16"), ("√144 = ?", "12"),
            ("1/4 + 1/2 = ?", "0.75"), ("9³ = ?", "729"), ("(10²)/4 = ?", "25"),
            ("5! (팩토리얼) = ?", "120"), ("1000 ÷ 25 = ?", "40"),
            ("7² + 24² = ?", "625")
        ]
    },
    "science": {
        "easy": [
            ("물의 화학식은?", "H2O"), ("지구의 위성은?", "달"),
            ("사람은 무엇으로 숨 쉬나요?", "폐"), ("지구는 몇 번째 행성?", "3"),
            ("태양은 어떤 별인가요?", "항성"), ("식물은 무엇으로 산소를 만드나요?", "광합성"),
            ("전기를 잘 통하는 물질?", "도체"), ("빛의 속도 단위는?", "km/s"),
            ("지구의 자전 방향은?", "서에서 동"), ("하늘이 파랗게 보이는 이유는?", "산란")
        ],
        "medium": [
            ("빛의 속도는 초속 약 몇 km?", "300000"), ("원자번호 1번은?", "수소"),
            ("지구의 대기는 주로 어떤 기체?", "질소"), ("태양계의 가장 큰 행성은?", "목성"),
            ("뉴턴의 제1법칙은?", "관성의 법칙"), ("DNA의 주요 역할은?", "유전정보 저장"),
            ("세포의 에너지를 생산하는 기관은?", "미토콘드리아"),
            ("절대영도는 몇 도?", "-273.15"), ("피타고라스 정리 공식은?", "a² + b² = c²"),
            ("빛이 굴절되는 이유는?", "속도의 차이")
        ],
        "hard": [
            ("엔트로피는 무엇의 척도?", "무질서도"), ("상대성이론 발표자는?", "아인슈타인"),
            ("양자역학의 창시자 중 한 명은?", "플랑크"), ("태양의 표면 온도는?", "5500"),
            ("탄소의 원자번호는?", "6"), ("우주에서 가장 풍부한 원소는?", "수소"),
            ("빛의 세 가지 원색은?", "빨강 초록 파랑"), ("지구의 평균 자전 속도는?", "1670"),
            ("원자번호 79번 원소는?", "금"), ("‘E=mc²’에서 c는?", "빛의 속도")
        ]
    },
    "history": {
        "easy": [
            ("한글을 만든 왕은?", "세종대왕"), ("한국의 국기는?", "태극기"),
            ("한국의 수도는?", "서울"), ("대한민국의 건국일은?", "1948"),
            ("첫 대통령은?", "이승만"), ("프랑스의 수도는?", "파리"),
            ("일본의 수도는?", "도쿄"), ("한국의 국화는?", "무궁화"),
            ("조선의 마지막 왕은?", "고종"), ("삼국시대에 존재하지 않은 나라는?", "가야")
        ],
        "medium": [
            ("6.25 전쟁은 몇 년도에 발발했나요?", "1950"), ("세계 2차 대전은 몇 년도에 시작?", "1939"),
            ("이순신 장군의 대표 전투는?", "명량대첩"), ("조선의 첫 왕은?", "태조"),
            ("독립운동가 유관순은 어느 운동?", "3.1 운동"), ("로마 제국의 언어는?", "라틴어"),
            ("고려를 건국한 왕은?", "태조 왕건"), ("미국의 첫 대통령은?", "조지 워싱턴"),
            ("세계 최초의 문명은?", "메소포타미아"), ("삼국통일을 이룬 나라는?", "신라")
        ],
        "hard": [
            ("프랑스 혁명은 몇 년도?", "1789"), ("고려 말의 개혁 정치가는?", "정도전"),
            ("조선 후기 실학자 중 ‘경세유표’를 쓴 사람은?", "정약용"),
            ("청일전쟁은 몇 년도?", "1894"), ("일제강점기는 몇 년간 지속?", "35"),
            ("세계 1차 대전은 언제 시작?", "1914"), ("대한민국 임시정부는 어디서 수립?", "상하이"),
            ("광복절은 몇 월 며칠?", "8월 15일"), ("삼국유사를 쓴 승려는?", "일연"),
            ("임진왜란은 몇 년도?", "1592")
        ]
    }
}

# ========================================================
# ⚙️ 게임 함수
# ========================================================
def jangjang_quiz():
    slow_print("🎉 [Jangjang씨의 퀴즈 게임] 🎉", 0.02)

    # 테마 선택
    theme = ""
    while theme not in quiz_data.keys():
        slow_print("테마 선택 (general / math / science / history): ", 0.02)
        theme = input().lower()

    # 난이도 선택
    difficulty = ""
    while difficulty not in ["easy", "medium", "hard"]:
        slow_print("난이도 선택 (easy / medium / hard): ", 0.02)
        difficulty = input().lower()

    # 모드 선택
    slow_print("\n🧩 특수 모드 선택:", 0.03)
    slow_print("1. ⏱️ 타임어택 (문제당 5초 제한)", 0.02)
    slow_print("2. 💣 서바이벌 (틀리면 즉시 탈락)", 0.02)
    slow_print("3. 😎 일반 (자유롭게)", 0.02)
    mode = input("모드 번호 입력 (1/2/3): ").strip()

    total = min(10, len(quiz_data[theme][difficulty]))  # 문제 개수 제한
    score = 0
    questions = random.sample(quiz_data[theme][difficulty], total)

    slow_print(f"\n🎯 테마: {theme.upper()} | 난이도: {difficulty.upper()} | 모드: {mode}\n", 0.02)
    time.sleep(0.5)

    for i, (q, a) in enumerate(questions, start=1):
        slow_print(f"\n[{i}/{total}] ❓ {q}", 0.03)

        if mode == "1":
            user, timed_out = timed_input("👉 답변: ", timeout=5)
            if timed_out:
                continue
        else:
            user = input("👉 답변: ").strip()

        if a.lower() in user.lower():
            slow_print("✅ 정답!\n", 0.03)
            score += 1
        else:
            slow_print(f"❌ 오답! 정답은 [{a}] 입니다.\n", 0.03)
            if mode == "2":
                slow_print("💥 서바이벌 모드 탈락!", 0.03)
                break

    slow_print("\n🎮 게임 종료 🎮", 0.03)
    slow_print(f"당신의 점수는 {score}/{total}점입니다!", 0.03)
    slow_print("수고하셨습니다! 👏", 0.03)

# ========================================================
# 🏁 실행
# ========================================================
if __name__ == "__main__":
    jangjang_quiz()